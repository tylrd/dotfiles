#!/usr/bin/env bash

# must use exit to exit shell
set -o ignoreeof

case "$OSTYPE" in
  solaris*) SYSTEM_TYPE="SOLARIS" ;;
  darwin*)  SYSTEM_TYPE="OSX" ;;
  linux*)   SYSTEM_TYPE="LINUX" ;;
  bsd*)     SYSTEM_TYPE="BSD" ;;
  msys*)    SYSTEM_TYPE="MINGW" ;;
  cygwin*)  SYSTEM_TYPE="CYGWIN" ;;
esac

export SYSTEM_TYPE

if which brew >/dev/null 2>&1; then
  INSTALL_TYPE="BREW"
fi

if which apt-get >/dev/null 2>&1; then
  INSTALL_TYPE="APT"
fi

if which yum >/dev/null 2>&1; then
  INSTALL_TYPE="YUM"
fi

export INSTALL_TYPE

# make vim the default editor
export PAGER=${PAGER:-"less"}
export EDITOR="vim"
export VISUAL=$EDITOR

export FZF_DEFAULT_COMMAND='fd --type f'
export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"
export FZF_ALT_C_COMMAND="$FZF_DEFAULT_COMMAND"

export RIPGREP_CONFIG_PATH="$HOME/.rgrc"

#don't check mail when opening terminal.
unset MAILCHECK

# make the "sudo" prompt more useful, without requiring access to "visudo"
export SUDO_PROMPT=${SUDO_PROMPT:-"[sudo] password for %u on %h: "}

# larger bash history (allow 32Â³ entries; default is 500)
export HISTSIZE=${HISTSIZE:-32768} # resize history size
export HISTFILESIZE=$HISTSIZE

# https://unix.stackexchange.com/questions/1288/preserve-bash-history-in-multiple-terminal-windows
# Avoid duplicates
export HISTCONTROL=ignoreboth:erasedups
# When the shell exits, append to the history file instead of overwriting it
shopt -s histappend

# After each command, append to the history file and reread it
export PROMPT_COMMAND="${PROMPT_COMMAND:+$PROMPT_COMMAND$'\n'}history -a; history -c; history -r"

# make some commands not show up in history
export HISTIGNORE=${HISTIGNORE:-"shutdown*:halt*:poweroff*:hibernate*:rm -rf*"}
export HISTTIMEFORMAT=${HISTTIMEFORMAT:-"%Y-%m-%d %H:%M:%S"}

export LS_COLORS='di=34' # directory  blue
LS_COLORS+=':ln=35'      # symlink    magenta
LS_COLORS+=':ex=31'      # executable red
LS_COLORS+=':st=0'       # sticky     normal

# Go variables
export GOPATH=$HOME/go

export PIPENV_VENV_IN_PROJECT=1
